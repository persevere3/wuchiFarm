(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b8815af2"],{"30e4":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("BaseLogoLoading",{key:t.isLoading,attrs:{isLoading:t.isLoading}}),s("div",{staticClass:"container-fluid mt-5"},[s("ul",{staticClass:"category d-flex justify-content-center"},[s("li",{staticStyle:{"border-left":"2px dotted var(--secondarycolor)"}},[s("a",{staticClass:"px-2 px-md-3 py-md-2 d-flex flex-column flex-md-row\n                   justify-content-center align-items-center",class:{active:"all"===t.category},on:{click:function(e){return e.preventDefault(),t.getFilterProducts("all")}}},[s("i",{staticClass:"fas fa-leaf"}),t._m(0)])]),s("li",[s("a",{staticClass:" px-2 px-md-3 py-md-2 d-flex flex-column flex-md-row\n                    justify-content-center align-items-center",class:{active:"米"===t.category},on:{click:function(e){return e.preventDefault(),t.getFilterProducts("米")}}},[s("i",{staticClass:"fas fa-leaf"}),t._m(1)])]),s("li",[s("a",{staticClass:" px-2 px-md-3 py-md-2 d-flex flex-column flex-md-row\n                    justify-content-center align-items-center",class:{active:"番茄"===t.category},on:{click:function(e){return e.preventDefault(),t.getFilterProducts("番茄")}}},[s("i",{staticClass:"fas fa-leaf "}),t._m(2)])]),s("li",[s("a",{staticClass:" px-2 px-md-3 py-md-2 d-flex flex-column flex-md-row\n                    justify-content-center align-items-center",class:{active:"草莓"===t.category},on:{click:function(e){return e.preventDefault(),t.getFilterProducts("草莓")}}},[s("i",{staticClass:"fas fa-leaf"}),t._m(3)])])])]),s("div",{staticClass:"container mb-3"},[s("div",{staticClass:"row"},t._l(t.filterProducts,(function(e,a){return s("div",{directives:[{name:"show",rawName:"v-show",value:a>=(t.currentPage-1)*t.showNumber&&a<t.currentPage*t.showNumber,expression:"key>=(currentPage-1)*showNumber&&key<currentPage*showNumber"}],key:a,staticClass:"product col-md-6 col-lg-4 my-2"},[s("a",{on:{click:function(s){return s.preventDefault(),t.routerPush("/customerBase/customerProduct/"+e.id)}}},[s("p",{staticClass:"title text-primary"},[t._v(t._s(e.title))]),s("div",{staticClass:"boxone bgCover ",style:{backgroundImage:"url("+e.imageUrl+")"}}),s("div",{staticClass:"boxtwo bgCover ",style:{backgroundImage:"url("+e.imageUrl+")"}}),s("div",{staticClass:"info py-2 d-flex flex-column"},[s("div",{staticClass:"intro mb-auto"},[t._v(t._s(e.description))]),s("div",{staticClass:"price d-flex justify-content-end align-items-end"},[s("span",{staticClass:"original mr-2 "},[t._v(t._s(t._f("currency")(e.origin_price)))]),s("span",{staticClass:"special text-danger mr-2 "},[t._v(t._s(t._f("currency")(e.price)))])]),s("div",{staticClass:"button d-flex justify-content-end align-items-center"},[s("i",{staticClass:"fas fa-heart fa-2x like mr-2 mt-2",class:{likeActive:t.isLike[""+a]},attrs:{"aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.updateLikeProducts(a)}}}),s("button",{staticClass:"btn mr-1 mt-2 btn-outline-success"},[t._v("more ")]),s("button",{staticClass:"btn btn-success cart mr-2 mt-2",attrs:{disabled:e.id===t.status.loadingItem},on:{click:function(s){return s.stopPropagation(),t.addtoCart(e.id)}}},[e.id===t.status.loadingItem?s("i",{staticClass:"fas fa-spinner fa-spin"}):s("i",{staticClass:"fas fa-plus "}),t._v(" 加入購物車 ")])])])])])})),0)]),s("ProductlistPagination",{attrs:{currentPage:t.currentPage,totalPage:t.totalPage}})],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"categoryName d-flex flex-column flex-md-row\n                      justify-content-center align-items-center"},[s("p",{staticClass:"ml-md-1 en"},[t._v("All")]),s("p",{staticClass:"ml-md-1"},[t._v("全部")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"categoryName d-flex flex-column flex-md-row\n                      justify-content-center align-items-center"},[s("p",{staticClass:"ml-md-1 en"},[t._v("Rice")]),s("p",{staticClass:"ml-md-1"},[t._v("米")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"categoryName d-flex flex-column flex-md-row\n                      justify-content-center align-items-center"},[s("p",{staticClass:"ml-md-1 en"},[t._v("Tomato")]),s("p",{staticClass:"ml-md-1"},[t._v("番茄")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"categoryName d-flex flex-column flex-md-row\n                      justify-content-center align-items-center"},[s("p",{staticClass:"ml-md-1 en"},[t._v("Strawberry")]),s("p",{staticClass:"ml-md-1"},[t._v("草莓")])])}],r=(s("99af"),s("4de4"),s("a434"),s("ac1f"),s("466d"),s("26e9")),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav",{staticClass:"mb-3 d-flex justify-content-center"},[s("ul",{staticClass:"pagination"},[s("li",{staticClass:"page-item",class:{disabled:1===t.currentPage}},[s("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.pageChange(t.currentPage-1)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("«")]),s("span",{staticClass:"sr-only"},[t._v("Previous")])])]),t._l(t.totalPage,(function(e){return s("li",{key:e,staticClass:"page-item",class:{active:t.currentPage===e}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.pageChange(e)}}},[t._v(t._s(e))])])})),s("li",{staticClass:"page-item",class:{disabled:t.currentPage===t.totalPage}},[s("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.pageChange(t.currentPage+1)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("»")]),s("span",{staticClass:"sr-only"},[t._v("Next")])])])],2)])])},n=[],o={props:["currentPage","totalPage"],methods:{pageChange:function(t){this.$bus.$emit("currentPagePush",t)}}},l=o,u=s("2877"),d=Object(u["a"])(l,c,n,!1,null,null,null),f=d.exports,g={props:["showNumber"],components:{BaseLogoLoading:r["a"],ProductlistPagination:f},data:function(){return{products:[],filterProducts:[],likeProducts:[],isLike:[],category:"",currentPage:0,totalPage:0,carts:[],isLoading:!1,status:{loadingItem:""}}},methods:{getProducts:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("perseverepoch","/products/all");t.isLoading=!0,this.$http.get(e).then((function(e){t.products=e.data.products,t.getFilterProducts("all"),t.isLoading=!1}))},getFilterProducts:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.category=t,this.filterProducts="all"===t?this.products:this.products.filter((function(e){return e.category.match(t)})),this.currentPage=e,this.totalPage=Math.ceil(this.filterProducts.length/this.showNumber),this.isLike.length=0;for(var s=0;s<this.filterProducts.length;s+=1)this.$set(this.isLike,s,!1);this.likeProducts=JSON.parse(localStorage.getItem("likeProducts"))||[];for(var a=0;a<this.likeProducts.length;a+=1)for(var i=0;i<this.filterProducts.length;i+=1)this.likeProducts[a].id===this.filterProducts[i].id&&this.$set(this.isLike,i,!0)},updateLikeProducts:function(t){if(this.$set(this.isLike,t,!this.isLike[t]),!0===this.isLike[t])this.likeProducts.push(this.filterProducts[t]);else for(var e=0;e<this.likeProducts.length;e+=1)this.filterProducts[t].id===this.likeProducts[e].id&&this.likeProducts.splice(e,1);localStorage.setItem("likeProducts",JSON.stringify(this.likeProducts)),this.$bus.$emit("getLikeProducts"),this.$bus.$emit("getHistoryProducts"),this.$bus.$emit("getPopularProducts")},getCart:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("perseverepoch","/cart");this.$http.get(e).then((function(e){t.carts=e.data.data}))},addtoCart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=this,a=0,i=0,r=0;for(a=0;a<s.carts.carts.length;a+=1)t===s.carts.carts[a].product.id&&(i=s.carts.carts[a].qty,s.removeCartItem(s.carts.carts[a].id));r=e+i;var c="".concat("https://vue-course-api.hexschool.io","/api/").concat("perseverepoch","/cart");s.status.loadingItem=t;var n={product_id:t,qty:r};this.$http.post(c,{data:n}).then((function(){s.$bus.$emit("getCartEmit"),s.status.loadingItem="",s.$bus.$emit("messagePush","已加入購物車"),s.getCart()}))},removeCartItem:function(t){var e=this;e.status.loadingItem=t;var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("perseverepoch","/cart/").concat(t);this.$http.delete(s).then((function(){e.status.loadingItem=""}))},routerPush:function(t){this.$router.push(t)}},created:function(){var t=this;this.getProducts(),this.getCart(),this.$bus.$emit("pageActivePush",this.$route.path),this.$bus.$on("currentPagePush",(function(e){t.currentPage=e})),this.$bus.$on("getFilterProducts",(function(){t.getFilterProducts(t.category,t.currentPage)}))}},h=g,m=(s("6fe6"),Object(u["a"])(h,a,i,!1,null,"530cb489",null));e["a"]=m.exports},"466d":function(t,e,s){"use strict";var a=s("d784"),i=s("825a"),r=s("50c4"),c=s("1d80"),n=s("8aa5"),o=s("14c3");a("match",1,(function(t,e,s){return[function(e){var s=c(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,s):new RegExp(e)[t](String(s))},function(t){var a=s(e,t,this);if(a.done)return a.value;var c=i(t),l=String(this);if(!c.global)return o(c,l);var u=c.unicode;c.lastIndex=0;var d,f=[],g=0;while(null!==(d=o(c,l))){var h=String(d[0]);f[g]=h,""===h&&(c.lastIndex=n(l,r(c.lastIndex),u)),g++}return 0===g?null:f}]}))},"6fe6":function(t,e,s){"use strict";var a=s("c62a"),i=s.n(a);i.a},c07c:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ProductlistProducts",{attrs:{showNumber:t.showNumber}}),s("ProductlistHistory"),s("ProductlistPopular")],1)},i=[],r=s("30e4"),c=s("bd5b"),n=s("6e38"),o={components:{ProductlistProducts:r["a"],ProductlistHistory:c["a"],ProductlistPopular:n["a"]},data:function(){return{showNumber:6}}},l=o,u=s("2877"),d=Object(u["a"])(l,a,i,!1,null,null,null);e["default"]=d.exports},c62a:function(t,e,s){}}]);
//# sourceMappingURL=chunk-b8815af2.89e033d6.js.map