(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ea43b86"],{"09b2":function(t,s,e){},5078:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("BaseLogoLoading",{key:t.isLoading,attrs:{isLoading:t.isLoading}}),t.cartLength?e("div",{staticClass:"container"},[e("ShoppingCartStep",{attrs:{stepActive:t.stepActive}}),e("div",{staticClass:"tableWrap d-flex m-1"},[e("div",{staticClass:"boxone"}),e("div",{staticClass:"boxtwo"}),e("table",[t._m(0),e("tbody",t._l(t.carts.carts,(function(s){return e("tr",{key:s.id,staticClass:"p-1"},[e("td",{staticClass:"pictureTd align-middle text-center",attrs:{width:"90px",height:"90px"}},[e("div",{staticClass:"picture bgCover m-1",style:{backgroundImage:"url("+s.product.imageUrl+")"}})]),e("td",{staticClass:"align-middle text-left bgCover p-1",style:{backgroundImage:"url("+s.product.imageUrl+")"}},[e("div",{staticClass:"name bgCover p-2",on:{click:function(e){return e.preventDefault(),t.routerPush("/customerBase/customerProduct/"+s.product.id)}}},[t._v(" "+t._s(s.product.title)+" ")]),s.coupon?e("div",{staticClass:"text-danger p-1"},[t._v("已套用優惠券")]):t._e()]),e("td",{staticClass:"align-middle text-center"},[t._v(t._s(s.qty)+" ")]),e("td",{staticClass:"price align-middle text-right"},[t._v(t._s(t._f("currency")(s.product.price)))]),e("td",{staticClass:"align-middle text-center"},[e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button",disabled:s.id===t.status.loadingItem},on:{click:function(e){return t.removeCartItem(s.id)}}},[s.id===t.status.loadingItem?e("i",{staticClass:"fas fa-spinner fa-spin"}):e("i",{staticClass:"far fa-trash-alt"})])])])})),0)])]),e("div",{staticClass:"text-right pt-2",class:{lineThrough:t.carts.total!==t.carts.final_total}},[e("h5",[t._v("總計 : "),e("span",[t._v(t._s(t._f("currency")(t.carts.total)))])])]),t.carts.total!==t.carts.final_total?e("div",{staticClass:"text-right pt-1 text-danger"},[e("h5",[t._v("折扣價 : "),e("span",[t._v(t._s(t._f("currency")(t.carts.final_total)))])])]):t._e(),e("div",{staticClass:"input-group mt-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"輸入good80，享8折"},domProps:{value:t.coupon_code},on:{input:function(s){s.target.composing||(t.coupon_code=s.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v("套用優惠碼")])])]),e("div",{staticClass:"d-flex justify-content-center my-2"},[e("button",{staticClass:"btn btn-success px-5",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.routerPush("/customerBase/customerData")}}},[t._v(" 下一步，填寫資料 ")])])],1):e("div",{staticClass:"cartLength0  d-flex justify-content-center"},[e("h5",{staticClass:"py-2 px-3 "},[t._v("購物車目前沒有商品喔!")])]),e("ProductlistHistory"),e("ProductlistPopular")],1)},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",[e("th",{staticClass:"pictureTd p-2"}),e("th",{staticClass:"name text-left p-2"},[t._v("品名")]),e("th",{staticClass:"text-center p-2",attrs:{width:"50"}},[t._v("數量")]),e("th",{staticClass:"price text-right p-2",attrs:{width:"80"}},[t._v("單價")]),e("th",{staticClass:"text-center p-2",attrs:{width:"50"}},[t._v("移除")])])}],c=(e("99af"),e("26e9")),n=e("96fd"),o=e("bd5b"),r=e("6e38"),l={components:{BaseLogoLoading:c["a"],ShoppingCartStep:n["a"],ProductlistHistory:o["a"],ProductlistPopular:r["a"]},data:function(){return{stepActive:"cart",carts:[],cartLength:0,coupon_code:"",isLoading:!1,status:{loadingItem:""}}},methods:{getCart:function(){var t=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("perseverepoch","/cart");t.isLoading=!0,this.$http.get(s).then((function(s){t.carts=s.data.data,t.cartLength=t.carts.carts.length,t.isLoading=!1}))},removeCartItem:function(t){var s=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("perseverepoch","/cart/").concat(t);s.status.loadingItem=t,this.$http.delete(e).then((function(){s.getCart(),s.$bus.$emit("getCartEmit"),s.$bus.$emit("messagePush","已從購物車移除"),s.status.loadingItem=""}))},addCouponCode:function(){var t=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("perseverepoch","/coupon"),e={code:t.coupon_code};t.isLoading=!0,this.$http.post(s,{data:e}).then((function(s){s.data.success?(t.getCart(),t.$bus.$emit("getCartEmit"),t.$bus.$emit("messagePush","已套用優惠券")):t.$bus.$emit("messagePush",s.data.message),t.isLoading=!1}))},routerPush:function(t){this.$router.push(t)}},created:function(){var t=this;this.getCart(),this.$bus.$emit("pageActivePush",this.$route.path),this.$bus.$on("getShoppingCart",(function(){t.getCart()}))}},u=l,d=(e("e505"),e("2877")),p=Object(d["a"])(u,a,i,!1,null,"4a84aaac",null);s["default"]=p.exports},"96fd":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"step my-5 d-flex justify-content-center"},[e("ul",{staticClass:"d-flex"},[e("li",{staticClass:"px-2 px-sm-3 d-flex flex-column justify-content-center align-items-center",class:{now:"cart"===t.stepActive}},[e("i",{staticClass:"fas fa-list-ol fa-3x d-flex\n                    justify-content-center align-items-center"}),e("h2",{staticClass:"mt-1"},[t._v("01")]),e("h5",[t._v("確認訂單")])]),e("li",{staticClass:"px-2 px-sm-3 d-flex flex-column justify-content-center align-items-center",class:{now:"data"===t.stepActive}},[e("i",{staticClass:"fas fas fa-digital-tachograph fa-3x\n                    d-flex justify-content-center align-items-center"}),e("h2",{staticClass:"mt-1"},[t._v("02")]),e("h5",[t._v("填寫資料")])]),e("li",{staticClass:"px-2 px-sm-3 d-flex flex-column justify-content-center align-items-center",class:{now:"pay"===t.stepActive}},[e("i",{staticClass:"far fa-money-bill-alt fa-3x d-flex\n                    justify-content-center align-items-center"}),e("h2",{staticClass:"mt-1"},[t._v("03")]),e("h5",[t._v("完成付款")])])])])])},i=[],c={props:["stepActive"]},n=c,o=(e("e50f"),e("2877")),r=Object(o["a"])(n,a,i,!1,null,"1b012b93",null);s["a"]=r.exports},d7b5:function(t,s,e){},e505:function(t,s,e){"use strict";var a=e("d7b5"),i=e.n(a);i.a},e50f:function(t,s,e){"use strict";var a=e("09b2"),i=e.n(a);i.a}}]);
//# sourceMappingURL=chunk-5ea43b86.25d5b694.js.map