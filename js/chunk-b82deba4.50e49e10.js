(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b82deba4"],{"5e9e":function(t,s,i){"use strict";var o=i("82aa"),r=i.n(o);r.a},"82aa":function(t,s,i){},c925:function(t,s,i){"use strict";i.r(s);var o=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("BaseLogoLoading",{key:t.isLoading,attrs:{isLoading:t.isLoading}}),i("div",{staticClass:"container"},[i("div",{staticClass:"product d-md-flex flex-md-wrap align-items-md-end"},[i("div",{staticClass:"picture"},[i("div",{staticClass:"boxone rounded"}),i("div",{staticClass:"boxtwo rounded"}),i("div",{staticClass:"boxthree rounded"}),i("div",{staticClass:"boxmain rounded  bgCover",style:{backgroundImage:"url("+t.product.imageUrl+")"}})]),i("div",{staticClass:"info bg-white px-3 d-flex flex-column justify-content-center align-items-start"},[i("div",{staticClass:"name text-primary p-2"},[t._v(t._s(t.product.title))]),i("div",{staticClass:"price p-2 d-flex justify-content-start align-items-end"},[i("span",{staticClass:"original mr-2"},[t._v(t._s(t._f("currency")(t.product.origin_price)))]),i("span",{staticClass:"special text-danger mr-2"},[t._v(t._s(t._f("currency")(t.product.price)))])]),i("label",{staticClass:"pt-2 px-2",attrs:{for:"num"}},[t._v("請選購數量:")]),i("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"First group"}},[i("button",{staticClass:"btn btn-secondary",class:{disabled:t.buyNum<2},attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.changeNum(-1)}}},[i("i",{staticClass:"fas fa-minus"})]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.buyNum,expression:"buyNum"}],staticClass:"text-center border-0",attrs:{disabled:"",type:"text",size:"5",id:"num"},domProps:{value:t.buyNum},on:{input:function(s){s.target.composing||(t.buyNum=s.target.value)}}}),i("button",{staticClass:"btn btn-secondary",class:{disabled:t.buyNum>9},attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.changeNum(1)}}},[i("i",{staticClass:"fas fa-plus"})])]),i("div",{staticClass:"total py-2 px-2 d-flex"},[t._v("小計 : "),i("span",[t._v(t._s(t._f("currency")(t.buyNum*t.product.price)))])]),i("div",{staticClass:"d-flex"},[i("i",{staticClass:"fas fa-heart fa-2x like mr-1 py-3",class:{likeActive:t.isLike},attrs:{"aria-hidden":"true"},on:{click:function(s){return s.stopPropagation(),t.updateLikeProducts()}}}),i("button",{staticClass:"cart btn btn-success my-2 mx-1",attrs:{disabled:t.product.id===t.status.loadingItem},on:{click:function(s){return s.preventDefault(),t.addtoCart(t.product.id,t.buyNum)}}},[t.product.id===t.status.loadingItem?i("i",{staticClass:"fas fa-spinner fa-spin mr-1"}):i("i",{staticClass:"fas fa-plus mr-1"}),t._v("加入購物車 ")])])]),i("div",{staticClass:"introduction my-2 my-md-4 pt-2 pt-md-4"},[i("div",{staticClass:"mb-2 text-primary",staticStyle:{"font-size":"1.5rem"}},[t._v("商品介紹")]),t._v(" "+t._s(t.product.description)+" ")])])]),i("ProductlistHistory"),i("ProductlistPopular")],1)},r=[],a=(i("99af"),i("a434"),i("26e9")),e=i("bd5b"),c=i("6e38"),u={components:{BaseLogoLoading:a["a"],ProductlistHistory:e["a"],ProductlistPopular:c["a"]},data:function(){return{id:"",product:{},carts:[],buyNum:1,historyProducts:[],likeProducts:[],isLike:!1,isLoading:!1,status:{loadingItem:""}}},watch:{$route:["getProduct"]},methods:{getProduct:function(){var t=this;t.id=t.$route.params.id,t.buyNum=1;var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("perseverepoch","/product/").concat(t.id);t.isLoading=!0,this.$http.get(s).then((function(s){t.product=s.data.product,t.updateHistoryProducts(),t.updatePopularProducts(),t.isLoading=!1,t.updateIsLike()}))},updateIsLike:function(){this.isLike=!1,this.likeProducts=JSON.parse(localStorage.getItem("likeProducts"))||[];for(var t=0;t<this.likeProducts.length;t+=1)this.likeProducts[t].id===this.product.id&&(this.isLike=!0)},updateLikeProducts:function(){if(this.isLike=!this.isLike,!0===this.isLike)this.likeProducts.push(this.product);else for(var t=0;t<this.likeProducts.length;t+=1)this.product.id===this.likeProducts[t].id&&this.likeProducts.splice(t,1);localStorage.setItem("likeProducts",JSON.stringify(this.likeProducts)),this.$bus.$emit("getLikeProducts"),this.$bus.$emit("getHistoryProducts"),this.$bus.$emit("getPopularProducts")},getCart:function(){var t=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("perseverepoch","/cart");this.$http.get(s).then((function(s){t.carts=s.data.data}))},changeNum:function(t){this.buyNum+t>0&&this.buyNum+t<11&&(this.buyNum=this.buyNum+t)},addtoCart:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this,o=0,r=0,a=0;for(o=0;o<i.carts.carts.length;o+=1)t===i.carts.carts[o].product.id&&(r=i.carts.carts[o].qty,i.removeCartItem(i.carts.carts[o].id));a=s+r;var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("perseverepoch","/cart");i.status.loadingItem=t;var c={product_id:t,qty:a};this.$http.post(e,{data:c}).then((function(){i.$bus.$emit("getCartEmit"),i.status.loadingItem="",i.$bus.$emit("messagePush","已加入購物車"),i.getCart()}))},removeCartItem:function(t){var s=this;s.status.loadingItem=t;var i="".concat("https://vue-course-api.hexschool.io","/api/").concat("perseverepoch","/cart/").concat(t);this.$http.delete(i).then((function(){s.status.loadingItem=""}))},updateHistoryProducts:function(){this.historyProducts=JSON.parse(localStorage.getItem("historyProducts"))||[];for(var t=0;t<this.historyProducts.length;t+=1)if(this.product.id===this.historyProducts[t].id){for(var s=this.historyProducts[t],i=t;i<this.historyProducts.length-1;i+=1)this.historyProducts[i]=this.historyProducts[i+1];return this.historyProducts[this.historyProducts.length-1]=s,void localStorage.setItem("historyProducts",JSON.stringify(this.historyProducts))}if(3===this.historyProducts.length){for(var o=1;o<this.historyProducts.length;o+=1)this.historyProducts[o-1]=this.historyProducts[o];this.historyProducts.pop(),this.historyProducts.push(this.product)}else this.historyProducts.push(this.product);localStorage.setItem("historyProducts",JSON.stringify(this.historyProducts))},updatePopularProducts:function(){var t=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("perseverepoch","/admin/product/").concat(t.product.id);t.product.unit=+t.product.unit+1,this.$http.put(s,{data:t.product}).then((function(){}))}},created:function(){var t=this;this.getProduct(),this.getCart(),this.$bus.$emit("pageActivePush",this.$route.path),this.$bus.$on("getProduct",(function(){t.updateIsLike()}))}},d=u,n=(i("5e9e"),i("2877")),h=Object(n["a"])(d,o,r,!1,null,"2117c5d3",null);s["default"]=h.exports}}]);
//# sourceMappingURL=chunk-b82deba4.50e49e10.js.map