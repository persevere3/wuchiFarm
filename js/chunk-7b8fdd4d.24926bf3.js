(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b8fdd4d"],{"2ee7":function(t,s,i){"use strict";var e=i("959b"),r=i.n(e);r.a},"6e38":function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[t._m(0),i("div",{staticClass:"container mb-3"},[i("div",{staticClass:"row"},t._l(t.products,(function(s,e){return i("div",{key:e,staticClass:"product col-md-6 col-lg-4 my-2"},[i("a",{on:{click:function(i){return i.preventDefault(),t.routerPush("/customerBase/customerProduct/"+s.id)}}},[t._v(" "+t._s(s.content)+" 瀏覽次數: "+t._s(s.unit)+" "),i("p",{staticClass:"title text-primary"},[t._v(t._s(s.title))]),i("div",{staticClass:"boxone bgCover ",style:{backgroundImage:"url("+s.imageUrl+")"}}),i("div",{staticClass:"boxtwo bgCover ",style:{backgroundImage:"url("+s.imageUrl+")"}}),i("div",{staticClass:"info py-2 d-flex flex-column"},[i("div",{staticClass:"intro mb-auto"},[t._v(t._s(s.description))]),i("div",{staticClass:"price d-flex justify-content-end align-items-end"},[i("span",{staticClass:"original mr-2 "},[t._v(t._s(t._f("currency")(s.origin_price)))]),i("span",{staticClass:"special text-danger mr-2 "},[t._v(t._s(t._f("currency")(s.price)))])]),i("div",{staticClass:"button d-flex justify-content-end align-items-center"},[i("i",{staticClass:"fas fa-heart fa-2x like mr-2 mt-2",class:{likeActive:t.getIsLike[""+e]},attrs:{"aria-hidden":"true"},on:{click:function(i){return i.stopPropagation(),t.updateLikeProducts(s)}}}),i("button",{staticClass:"more btn mr-2 mt-2 btn-outline-success"},[t._v("more")]),i("button",{staticClass:"btn btn-success cart mr-2 mt-2",attrs:{disabled:s.id===t.getLoadingItem},on:{click:function(i){return i.stopPropagation(),t.addToCart(s)}}},[s.id===t.getLoadingItem?i("i",{staticClass:"fas fa-spinner fa-spin"}):i("i",{staticClass:"fas fa-plus "}),t._v(" 加入購物車 ")])])])])])})),0)])])},r=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"container-fluid mt-3"},[i("ul",{staticClass:"category d-flex justify-content-start"},[i("li",{staticStyle:{"border-left":"2px dotted var(--secondarycolor)"}},[i("a",{staticClass:"px-2 px-md-3 py-md-2 d-flex flex-column flex-md-row\n                   justify-content-center align-items-center"},[i("div",{staticClass:"categoryName d-flex flex-column flex-md-row\n                      justify-content-center align-items-center"},[i("p",{staticClass:"ml-md-1 en"}),i("p",{staticClass:"ml-md-1 "},[t._v("其他人還看了。。。")])])])])])])}],a=(i("99af"),{data:function(){return{products:[],sortProducts:[]}},computed:{getIsLike:function(){var t=[];t=this.$store.state.likeProducts;for(var s=[],i=0;i<this.products.length;i+=1)this.$set(s,i,!1);if(0!==t.length)for(var e=0;e<t.length;e+=1)for(var r=0;r<this.products.length;r+=1)t[e].id===this.products[r].id&&this.$set(s,r,!0);return s},getLoadingItem:function(){return this.$store.state.loadingItem}},methods:{getPopularProducts:function(){var t=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("perseverepoch","/products/all");this.$http.get(s).then((function(s){t.products=s.data.products;for(var i=0;i<t.products.length;i+=1)t.sortProducts[i]=+t.products[i].unit;for(var e=0;e<t.products.length-1;e+=1)for(var r=0;r<t.products.length-1-e;r+=1)if(t.sortProducts[r]<t.sortProducts[r+1]){var a=t.sortProducts[r];t.sortProducts[r]=t.sortProducts[r+1],t.sortProducts[r+1]=a,a=t.products[r],t.products[r]=t.products[r+1],t.products[r+1]=a}t.products.length=3,t.$store.dispatch("getLikeProducts")}))},updateLikeProducts:function(t){this.$store.dispatch("updateLikeProducts",t)},getCart:function(){this.$store.dispatch("getCart")},addToCart:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$store.dispatch("addToCart",{item:t,qty:s})},routerPush:function(t){t!==this.$route.path&&this.$router.push(t)}},created:function(){var t=this;this.getPopularProducts(),this.getCart(),this.$bus.$on("getPopularProducts",(function(){t.getPopularProducts()}))}}),o=a,c=(i("2ee7"),i("2877")),n=Object(c["a"])(o,e,r,!1,null,"ceb50f62",null);s["a"]=n.exports},"7ce1":function(t,s,i){"use strict";var e=i("e2ba"),r=i.n(e);r.a},"959b":function(t,s,i){},bd5b:function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[t._m(0),i("div",{staticClass:"container mb-3"},[i("div",{staticClass:"row"},t._l(t.historyProducts,(function(s,e){return i("div",{directives:[{name:"show",rawName:"v-show",value:e<t.historyProducts.length-1,expression:"key<historyProducts.length-1"}],key:e,staticClass:"product col-md-6 col-lg-4 my-2"},[i("a",{on:{click:function(i){return i.preventDefault(),t.routerPush("/customerBase/customerProduct/"+s.id)}}},[t._v(" "+t._s(s.content)+" "),i("p",{staticClass:"title text-primary"},[t._v(t._s(s.title))]),i("div",{staticClass:"boxone bgCover ",style:{backgroundImage:"url("+s.imageUrl+")"}}),i("div",{staticClass:"boxtwo bgCover ",style:{backgroundImage:"url("+s.imageUrl+")"}}),i("div",{staticClass:"info py-2 d-flex flex-column"},[i("div",{staticClass:"intro mb-auto"},[t._v(t._s(s.description))]),i("div",{staticClass:"price d-flex justify-content-end align-items-end"},[i("span",{staticClass:"original mr-2 "},[t._v(t._s(t._f("currency")(s.origin_price)))]),i("span",{staticClass:"special text-danger mr-2 "},[t._v(t._s(t._f("currency")(s.price)))])]),i("div",{staticClass:"button d-flex justify-content-end align-items-center"},[i("i",{staticClass:"fas fa-heart fa-2x like mr-2 mt-2",class:{likeActive:t.getIsLike[""+e]},attrs:{"aria-hidden":"true"},on:{click:function(i){return i.stopPropagation(),t.updateLikeProducts(s)}}}),i("button",{staticClass:"more btn mr-2 mt-2 btn-outline-success"},[t._v("more")]),i("button",{staticClass:"btn btn-success cart mr-2 mt-2",attrs:{disabled:s.id===t.getLoadingItem},on:{click:function(i){return i.stopPropagation(),t.addToCart(s)}}},[s.id===t.getLoadingItem?i("i",{staticClass:"fas fa-spinner fa-spin"}):i("i",{staticClass:"fas fa-plus "}),t._v(" 加入購物車 ")])])])])])})),0)])])},r=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"container-fluid mt-3"},[i("ul",{staticClass:"category d-flex justify-content-start"},[i("li",{staticStyle:{"border-left":"2px dotted var(--secondarycolor)"}},[i("a",{staticClass:"px-2 px-md-3 py-md-2 d-flex flex-column flex-md-row\n                   justify-content-center align-items-center"},[i("div",{staticClass:"categoryName d-flex flex-column flex-md-row\n                      justify-content-center align-items-center"},[i("p",{staticClass:"ml-md-1 en"}),i("p",{staticClass:"ml-md-1 "},[t._v("您剛剛還看了。。。")])])])])])])}],a={data:function(){return{historyProducts:[]}},computed:{getIsLike:function(){var t=[];t=this.$store.state.likeProducts;for(var s=[],i=0;i<this.historyProducts.length;i+=1)this.$set(s,i,!1);if(0!==t.length)for(var e=0;e<t.length;e+=1)for(var r=0;r<this.historyProducts.length;r+=1)t[e].id===this.historyProducts[r].id&&this.$set(s,r,!0);return s},getLoadingItem:function(){return this.$store.state.loadingItem}},methods:{getHistoryProducts:function(){this.historyProducts=JSON.parse(localStorage.getItem("historyProducts"))||[],this.$store.dispatch("getLikeProducts")},updateLikeProducts:function(t){this.$store.dispatch("updateLikeProducts",t)},getCart:function(){this.$store.dispatch("getCart")},addToCart:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$store.dispatch("addToCart",{item:t,qty:s})},routerPush:function(t){t!==this.$route.path&&this.$router.push(t)}},created:function(){var t=this;this.getHistoryProducts(),this.getCart(),this.$bus.$on("getHistoryProducts",(function(){t.getHistoryProducts()}))}},o=a,c=(i("c1f2"),i("2877")),n=Object(c["a"])(o,e,r,!1,null,"2cf74fc6",null);s["a"]=n.exports},c1f2:function(t,s,i){"use strict";var e=i("ff31"),r=i.n(e);r.a},c925:function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("div",{staticClass:"container"},[i("div",{staticClass:"product d-md-flex flex-md-wrap align-items-md-end"},[i("div",{staticClass:"picture"},[i("div",{staticClass:"boxone rounded"}),i("div",{staticClass:"boxtwo rounded"}),i("div",{staticClass:"boxthree rounded"}),i("div",{staticClass:"boxmain rounded  bgCover",style:{backgroundImage:"url("+t.product.imageUrl+")"}})]),i("div",{staticClass:"info bg-white px-3 d-flex flex-column justify-content-center align-items-start"},[i("div",{staticClass:"name text-primary p-2"},[t._v(t._s(t.product.content)+t._s(t.product.title))]),i("div",{staticClass:"price p-2 d-flex justify-content-start align-items-end"},[i("span",{staticClass:"original mr-2"},[t._v(t._s(t._f("currency")(t.product.origin_price)))]),i("span",{staticClass:"special text-danger mr-2"},[t._v(t._s(t._f("currency")(t.product.price)))])]),i("label",{staticClass:"pt-2 px-2",attrs:{for:"num"}},[t._v("請選購數量:")]),i("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"First group"}},[i("button",{staticClass:"btn btn-secondary",class:{disabled:t.buyNum<2},attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.changeNum(-1)}}},[i("i",{staticClass:"fas fa-minus"})]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.buyNum,expression:"buyNum"}],staticClass:"text-center border-0",attrs:{disabled:"",type:"text",size:"5",id:"num"},domProps:{value:t.buyNum},on:{input:function(s){s.target.composing||(t.buyNum=s.target.value)}}}),i("button",{staticClass:"btn btn-secondary",class:{disabled:t.buyNum>9},attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.changeNum(1)}}},[i("i",{staticClass:"fas fa-plus"})])]),i("div",{staticClass:"total py-2 px-2 d-flex"},[t._v("小計 : "),i("span",[t._v(t._s(t._f("currency")(t.buyNum*t.product.price)))])]),i("div",{staticClass:"d-flex"},[i("i",{staticClass:"fas fa-heart fa-2x like mr-1 py-3",class:{likeActive:t.getIsLike},attrs:{"aria-hidden":"true"},on:{click:function(s){return s.stopPropagation(),t.updateLikeProducts(t.product)}}}),i("button",{staticClass:"cart btn btn-success my-2 mx-1",attrs:{disabled:t.product.id===t.getLoadingItem},on:{click:function(s){return s.preventDefault(),t.addToCart(t.product,t.buyNum)}}},[t.product.id===t.getLoadingItem?i("i",{staticClass:"fas fa-spinner fa-spin mr-1"}):i("i",{staticClass:"fas fa-plus mr-1"}),t._v("加入購物車 ")])])]),i("div",{staticClass:"introduction my-2 my-md-4 pt-2 pt-md-4"},[i("div",{staticClass:"mb-2 text-primary",staticStyle:{"font-size":"1.5rem"}},[t._v("商品介紹")]),t._v(" "+t._s(t.product.description)+" ")])])]),i("ProductlistHistory"),i("ProductlistPopular")],1)},r=[],a=(i("99af"),i("a434"),i("bd5b")),o=i("6e38"),c={components:{ProductlistHistory:a["a"],ProductlistPopular:o["a"]},data:function(){return{id:"",product:{},carts:[],buyNum:1,historyProducts:[]}},watch:{$route:["getProduct"]},computed:{isLoading:function(){return this.$store.state.isLoading},getIsLike:function(){var t=[];t=this.$store.state.likeProducts;var s=!1;if(0!==t.length)for(var i=0;i<t.length;i+=1)t[i].id===this.product.id&&(s=!0);return s},getLoadingItem:function(){return this.$store.state.loadingItem}},methods:{getProduct:function(){var t=this;t.id=t.$route.params.id,t.buyNum=1;var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("perseverepoch","/product/").concat(t.id);t.$store.dispatch("updateLoading",!0),this.$http.get(s).then((function(s){t.product=s.data.product,t.updateHistoryProducts(),t.updatePopularProducts(),t.$bus.$emit("getHistoryProducts"),t.$bus.$emit("getPopularProducts"),t.$store.dispatch("getLikeProducts"),t.$store.dispatch("updateLoading",!1)}))},updateLikeProducts:function(t){this.$store.dispatch("updateLikeProducts",t)},changeNum:function(t){this.buyNum+t>0&&this.buyNum+t<11&&(this.buyNum=this.buyNum+t)},getCart:function(){this.$store.dispatch("getCart")},addToCart:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$store.dispatch("addToCart",{item:t,qty:s})},updateHistoryProducts:function(){this.historyProducts=JSON.parse(localStorage.getItem("historyProducts"))||[];for(var t=0;t<this.historyProducts.length;t+=1)if(this.product.id===this.historyProducts[t].id){for(var s=this.historyProducts[t],i=t;i<this.historyProducts.length-1;i+=1)this.historyProducts[i]=this.historyProducts[i+1];return this.historyProducts[this.historyProducts.length-1]=s,void localStorage.setItem("historyProducts",JSON.stringify(this.historyProducts))}4===this.historyProducts.length?(this.historyProducts.splice(0,1),this.historyProducts.push(this.product)):this.historyProducts.push(this.product),localStorage.setItem("historyProducts",JSON.stringify(this.historyProducts))},updatePopularProducts:function(){var t=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("perseverepoch","/admin/product/").concat(t.product.id);t.product.unit=+t.product.unit+1,this.$http.put(s,{data:t.product}).then((function(){t.$bus.$emit("getPopularProducts")}))}},created:function(){this.getProduct(),this.getCart(),this.$bus.$emit("pageActivePush",this.$route.path)}},n=c,u=(i("7ce1"),i("2877")),d=Object(u["a"])(n,e,r,!1,null,"5ce098c6",null);s["default"]=d.exports},e2ba:function(t,s,i){},ff31:function(t,s,i){}}]);
//# sourceMappingURL=chunk-7b8fdd4d.24926bf3.js.map